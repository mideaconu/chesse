extends layout

block scripts
	link(rel="stylesheet",
		href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css",
		integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU", 
		crossorigin="anonymous")
	link(rel="stylesheet", 
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")
	script(
		src="https://code.jquery.com/jquery-3.5.1.min.js", 
		integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2",
		crossorigin="anonymous")
	script(
		src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js", 
		integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD", 
		crossorigin="anonymous")

block content
	#index-container
		#index-container-title-area
			#title CheSSE
			hr
			#subtitle Chess Similarity Search Engine
		#index-container-search-board-area
			#search-board
		#index-container-search-button-area
			button#search-button SEARCH
		#index-container-side-buttons-area
			button#start-button.side-button.fa.fa-backward &nbsp; STARTING POSITION
			button#clear-button.side-button.fa.fa-trash &nbsp; CLEAR BOARD
			button#flip-button.side-button.fa.fa-refresh &nbsp; FLIP BOARD
	script.
		var board = Chessboard("search-board", {
			pieceTheme: 'images/chesspieces/default/{piece}.png',
			draggable: true,
			sparePieces: true,
			dropOffBoard: "trash"
		});

		function searchPosition() {
			console.log(`${board.fen()}`);
			window.location.href = `/search?fen=${board.fen()}`;
		}

		$('#start-button').on('click', board.start);
		$('#clear-button').on('click', board.clear);
		$('#flip-button').on('click', board.flip);
		$('#search-button').on('click', searchPosition);
